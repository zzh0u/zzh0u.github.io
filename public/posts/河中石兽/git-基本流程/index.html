<!doctype html><html lang=en dir=auto><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Git 基本流程 | zzh0u's blog</title>
<meta name=keywords content="Git,技术"><meta name=description content="介绍了 Git 这一版本控制系统的基本使用流程，包括初始化代码库、添加文件、提交更改以及不同的版本回退操作。"><meta name=author content="zzh0u"><link rel=canonical href=http://localhost:1313/posts/%E6%B2%B3%E4%B8%AD%E7%9F%B3%E5%85%BD/git-%E5%9F%BA%E6%9C%AC%E6%B5%81%E7%A8%8B/><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.9c78afd72529c14d4d3c0fa583c3e82265e0d8a303d475223d3b37442260ba22.css integrity="sha256-nHiv1yUpwU1NPA+lg8PoImXg2KMD1HUiPTs3RCJguiI=" rel="preload stylesheet" as=style><link rel=icon href=http://localhost:1313/%3C/public/avatar.JPG%3E><link rel=icon type=image/png sizes=16x16 href=http://localhost:1313/%3C/public/avatar.JPG%3E><link rel=icon type=image/png sizes=32x32 href=http://localhost:1313/%3C/public/avatar.JPG%3E><link rel=apple-touch-icon href=http://localhost:1313/%3C/public/avatar.JPG%3E><link rel=mask-icon href=http://localhost:1313/%3C/public/avatar.JPG%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=http://localhost:1313/posts/%E6%B2%B3%E4%B8%AD%E7%9F%B3%E5%85%BD/git-%E5%9F%BA%E6%9C%AC%E6%B5%81%E7%A8%8B/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Git 基本流程"><meta property="og:description" content="介绍了 Git 这一版本控制系统的基本使用流程，包括初始化代码库、添加文件、提交更改以及不同的版本回退操作。"><meta property="og:type" content="article"><meta property="og:url" content="http://localhost:1313/posts/%E6%B2%B3%E4%B8%AD%E7%9F%B3%E5%85%BD/git-%E5%9F%BA%E6%9C%AC%E6%B5%81%E7%A8%8B/"><meta property="og:image" content="http://localhost:1313/static/DS.jpg"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-10-13T09:00:43+08:00"><meta property="article:modified_time" content="2024-10-13T09:00:43+08:00"><meta property="og:site_name" content="zzh0u's bolg1"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="http://localhost:1313/static/DS.jpg"><meta name=twitter:title content="Git 基本流程"><meta name=twitter:description content="介绍了 Git 这一版本控制系统的基本使用流程，包括初始化代码库、添加文件、提交更改以及不同的版本回退操作。"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"http://localhost:1313/posts/"},{"@type":"ListItem","position":2,"name":"Git 基本流程","item":"http://localhost:1313/posts/%E6%B2%B3%E4%B8%AD%E7%9F%B3%E5%85%BD/git-%E5%9F%BA%E6%9C%AC%E6%B5%81%E7%A8%8B/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Git 基本流程","name":"Git 基本流程","description":"介绍了 Git 这一版本控制系统的基本使用流程，包括初始化代码库、添加文件、提交更改以及不同的版本回退操作。","keywords":["Git","技术"],"articleBody":"Git 是一个版本控制系统，帮助用户在项目中追踪文件修改，并在需要时能够还原到之前操作。本文介绍了 Git 的基本流程，包括初始化、添加、提交、推送、拉取等操作。\n初始化 首先，需要在本地创建一个空文件夹，然后在该文件夹下执行 git init 命令，这将创建一个 .git 目录，里面包含了 Git 的所有配置信息。然后通过 touch 命令新建一个.txt文件，并在文件中输入任意内容：\n1 2 3 McDonald's Hamburger Coke 第一次 commit 在 .txt 文件中输入内容后，可以执行 git status 命令查看当前文件状态：\n1 2 3 4 5 6 7 8 9 On branch main No commits yet Untracked files: (use \"git add ...\" to include in what will be committed) text.txt nothing added to commit but untracked files present (use \"git add\" to track) 可以看到，文件处于未跟踪状态（Untracked）。这里引出 Git 中文件的第一种状态：未跟踪状态（Untracked）。需要执行 git add 命令将文件添加到暂存区。执行 git add text.txt 命令后，再次执行 git status 命令,可以看到：\n1 2 3 4 5 6 7 On branch main No commits yet Changes to be committed: (use \"git rm --cached ...\" to unstage) new file: text.txt 可以看到，文件已被添加到暂存区，等待提交。这里引出第二种状态：暂存状态（Staged）。暂存区（Stage）是 Git 用来暂存文件的地方。现在我们需要执行 git commit -m \"first commit\" 命令提交文件，-m 参数后面是提交信息。也可以不加参数，直接执行 git commit 命令，这时会打开默认编辑器，输入提交信息。这个时候再次执行 git status 命令，可以看到：\n1 2 On branch main nothing to commit, working tree clean 可以看到，暂存区已经清空，工作区也没有未提交的修改。这个时候，所有的文件都属于第三种状态：已提交状态（Committed）。至此，第一次 commit 圆满完成。\n你可以吃后悔药 首先，我们现在自己的仓库多提交了几次 commit 之后，内容如下：\n1 2 3 4 5 McDonald's Hamburger Coke fries Chicken Nuggets 这个时候再次执行 git status 命令，可以看到：\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 commit b3e4e008af045743defb01ca55b2ddd47c6926e4 (HEAD -\u003e main) Author: zzh0u Date: Sun Oct 13 09:44:57 2024 +0800 third commit commit 5c644068ce2184f5b4627aecd77462411355ec4e Author: zzh0u Date: Sun Oct 13 09:43:04 2024 +0800 second commit commit 6ccffbb33c7574c27f9a34b1812a5fef1af08696 Author: zzh0u Date: Sun Oct 13 09:32:00 2024 +0800 first commit 可以看到，当前仓库有三个 commit，当然，如果你觉得输出太多，眼花缭乱，可以加上 --oneline 参数，输出简洁版：\n1 2 3 b3e4e00 (HEAD -\u003e main) third commit 5c64406 second commit 6ccffbb first commit oops! 突然我又没那么想吃鸡块了，想回到上一次提交，怎么办？要回到第二个 commit，你可以运行 git reset 命令，后面跟上 commit 的 ID，即 git reset 5c64406，注意这里是第二次提交的 ID。做完这一步，你可能会满心欢喜的打开文本文档，但很抱歉，这个时候文件还是原来的样子，一如刚提交完第三次 commit 时候的样子，你满心疑惑，这到底是怎么回事？于是你又执行 git status:\n1 2 3 4 5 6 7 On branch main Changes not staged for commit: (use \"git add ...\" to update what will be committed) (use \"git restore ...\" to discard changes in working directory) modified: text.txt no changes added to commit (use \"git add\" and/or \"git commit -a\") 这时候你注意到终端的 Git 提示你现在的状态是 not staged，这就引出了第四种状态：未暂存状态（Unstaged）。但是别急，不信你试试 git log --oneline 命令，第三次提交不会出现在提交日志中：\n1 2 5c64406 (HEAD -\u003e main) second commit 6ccffbb first commit 我们已经成功回到的之前的 commit 了。如果你想撤销一个 commit，并撤销该提交之后的所有修改，你可以在 git reset 命令中加上 –hard 标志。让我们测试一下这个方法，回到第一个 commit，执行 git reset 6ccffbb --hard，这就会回到第一次修改的样子：\n1 2 3 McDonald's Hamburger Coke 我们又回到了指定提交时的文件初始状态。所有在那次 commit 之后对文件所做的修改都被删除。当我们检查提交日志时，我们将只看到第一次 commit。\n另类的后悔药 我已经重新回到了刚提交过三次 commit 后的状态：\n1 2 3 d3b86b2 (HEAD -\u003e main) third commit 5aac07d second commit 6ccffbb first commit 这次我们试试另外一个命令 git revert，同时输入当前提交的 ID。在我的例子中，我们使用最新的那个 commit 的 ID：\n1 git revert d3b86b2 这个命令会撤销指定提交，同时还会创建一个新的提交，记录撤销操作。执行完这个命令后，我们再次查看提交日志：\n1 2 3 4 ddc8aa6 (HEAD -\u003e main) Revert \"third commit\" d3b86b2 third commit 5aac07d second commit 6ccffbb first commit 可以看到，新的提交记录了撤销操作，同时保留了之前的提交记录。这就是 git revert 命令的作用。\n想必聪明的读者看到这里已经懂了，git reset 会直接回到某个 commit 的状态，并且直接删除之后的所有提交记录；而 git revert 则会创建一个新的提交，保留之前的提交记录，并记录撤销操作。不过虽然 git revert 很方便，但是也要注意不要滥用，它会引入新的提交记录，在团队合作中可能会造成混乱。\nPs 推荐阅读：freeCodeCamp 大家可以试试 git reset --soft 命令，看看它是怎么回事。 我刚想到一个骚操作，就是 revert 我上一次的 revert，什么俄罗斯套娃哈哈哈。 远程仓库的操作，先挖坑吧，以后有时间再写:-） 硬重置后的恢复，又挖一个坑orz 书影音 电影 看完：为黛西小姐开车｜★★★★☆ 看完：神偷奶爸4｜★★★★☆ 看完：泳者之心｜★★★★☆ 看完：头脑特工队2｜★★★★★ 看完：四月物语｜★★★★☆ 看完：走走停停｜★★★★☆ 音乐 在听：勿听@张紫宁\u0026赵紫骅｜★★★★★ 在听：未竟@秦勇｜★★★★★ ","wordCount":"1868","inLanguage":"en","image":"http://localhost:1313/static/DS.jpg","datePublished":"2024-10-13T09:00:43+08:00","dateModified":"2024-10-13T09:00:43+08:00","author":[{"@type":"Person","name":"zzh0u"}],"mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:1313/posts/%E6%B2%B3%E4%B8%AD%E7%9F%B3%E5%85%BD/git-%E5%9F%BA%E6%9C%AC%E6%B5%81%E7%A8%8B/"},"publisher":{"@type":"Organization","name":"zzh0u's blog","logo":{"@type":"ImageObject","url":"http://localhost:1313/%3C/public/avatar.JPG%3E"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=http://localhost:1313/ accesskey=h title="/ (Alt + H)"><img src=http://localhost:1313/public/avatar.JPG alt aria-label=logo height=35>/</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=http://localhost:1313/dia/ title=Dia><span>Dia</span></a></li><li><a href=http://localhost:1313/tags title=Tags><span>Tags</span></a></li><li><a href=http://localhost:1313/index.xml title=RSS><span>RSS</span></a></li><li><a href=http://localhost:1313/about title=About><span>About</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=http://localhost:1313/>Home</a>&nbsp;»&nbsp;<a href=http://localhost:1313/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">Git 基本流程</h1><div class=post-description>介绍了 Git 这一版本控制系统的基本使用流程，包括初始化代码库、添加文件、提交更改以及不同的版本回退操作。</div><div class=post-meta><span title='2024-10-13 09:00:43 +0800 CST'>2024-10-13</span>&nbsp;·&nbsp;4 min&nbsp;·&nbsp;1868 words&nbsp;·&nbsp;zzh0u</div></header><aside id=toc-container class="toc-container wide"><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#%e5%88%9d%e5%a7%8b%e5%8c%96 aria-label=初始化>初始化</a></li><li><a href=#%e7%ac%ac%e4%b8%80%e6%ac%a1-commit aria-label="第一次 commit">第一次 commit</a></li><li><a href=#%e4%bd%a0%e5%8f%af%e4%bb%a5%e5%90%83%e5%90%8e%e6%82%94%e8%8d%af aria-label=你可以吃后悔药>你可以吃后悔药</a></li><li><a href=#%e5%8f%a6%e7%b1%bb%e7%9a%84%e5%90%8e%e6%82%94%e8%8d%af aria-label=另类的后悔药>另类的后悔药</a></li><li><a href=#ps aria-label=Ps>Ps</a></li><li><a href=#%e4%b9%a6%e5%bd%b1%e9%9f%b3 aria-label=书影音>书影音</a></li></ul></div></details></div></aside><script>let activeElement,elements;window.addEventListener("DOMContentLoaded",function(){checkTocPosition(),elements=document.querySelectorAll("h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]"),activeElement=elements[0];const t=encodeURI(activeElement.getAttribute("id")).toLowerCase();document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active")},!1),window.addEventListener("resize",function(){checkTocPosition()},!1),window.addEventListener("scroll",()=>{activeElement=Array.from(elements).find(e=>{if(getOffsetTop(e)-window.pageYOffset>0&&getOffsetTop(e)-window.pageYOffset<window.innerHeight/2)return e})||activeElement,elements.forEach(e=>{const t=encodeURI(e.getAttribute("id")).toLowerCase();e===activeElement?document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active"):document.querySelector(`.inner ul li a[href="#${t}"]`).classList.remove("active")})},!1);const main=parseInt(getComputedStyle(document.body).getPropertyValue("--article-width"),10),toc=parseInt(getComputedStyle(document.body).getPropertyValue("--toc-width"),10),gap=parseInt(getComputedStyle(document.body).getPropertyValue("--gap"),10);function checkTocPosition(){const e=document.body.scrollWidth;e-main-toc*2-gap*4>0?document.getElementById("toc-container").classList.add("wide"):document.getElementById("toc-container").classList.remove("wide")}function getOffsetTop(e){if(!e.getClientRects().length)return 0;let t=e.getBoundingClientRect(),n=e.ownerDocument.defaultView;return t.top+n.pageYOffset}</script><div class=post-content><p>Git 是一个版本控制系统，帮助用户在项目中追踪文件修改，并在需要时能够还原到之前操作。本文介绍了 Git 的基本流程，包括初始化、添加、提交、推送、拉取等操作。</p><h2 id=初始化>初始化<a hidden class=anchor aria-hidden=true href=#初始化>#</a></h2><p>首先，需要在本地创建一个空文件夹，然后在该文件夹下执行 <code>git init</code> 命令，这将创建一个 <code>.git</code> 目录，里面包含了 Git 的所有配置信息。然后通过 <code>touch</code> 命令新建一个<code>.txt</code>文件，并在文件中输入任意内容：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-0-1><a class=lnlinks href=#hl-0-1>1</a>
</span><span class=lnt id=hl-0-2><a class=lnlinks href=#hl-0-2>2</a>
</span><span class=lnt id=hl-0-3><a class=lnlinks href=#hl-0-3>3</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>McDonald&#39;s
</span></span><span class=line><span class=cl>Hamburger
</span></span><span class=line><span class=cl>Coke
</span></span></code></pre></td></tr></table></div></div><h2 id=第一次-commit>第一次 commit<a hidden class=anchor aria-hidden=true href=#第一次-commit>#</a></h2><p>在 <code>.txt</code> 文件中输入内容后，可以执行 <code>git status</code> 命令查看当前文件状态：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-1-1><a class=lnlinks href=#hl-1-1>1</a>
</span><span class=lnt id=hl-1-2><a class=lnlinks href=#hl-1-2>2</a>
</span><span class=lnt id=hl-1-3><a class=lnlinks href=#hl-1-3>3</a>
</span><span class=lnt id=hl-1-4><a class=lnlinks href=#hl-1-4>4</a>
</span><span class=lnt id=hl-1-5><a class=lnlinks href=#hl-1-5>5</a>
</span><span class=lnt id=hl-1-6><a class=lnlinks href=#hl-1-6>6</a>
</span><span class=lnt id=hl-1-7><a class=lnlinks href=#hl-1-7>7</a>
</span><span class=lnt id=hl-1-8><a class=lnlinks href=#hl-1-8>8</a>
</span><span class=lnt id=hl-1-9><a class=lnlinks href=#hl-1-9>9</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>On branch main
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>No commits yet
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Untracked files:
</span></span><span class=line><span class=cl>  (use &#34;git add &lt;file&gt;...&#34; to include in what will be committed)
</span></span><span class=line><span class=cl>	text.txt
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>nothing added to commit but untracked files present (use &#34;git add&#34; to track)
</span></span></code></pre></td></tr></table></div></div><p>可以看到，文件处于未跟踪状态（Untracked）。这里引出 <code>Git</code> 中文件的第一种状态：<strong>未跟踪状态（Untracked）</strong>。需要执行 <code>git add</code> 命令将文件添加到暂存区。执行 <code>git add text.txt</code> 命令后，再次执行 <code>git status</code> 命令,可以看到：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-2-1><a class=lnlinks href=#hl-2-1>1</a>
</span><span class=lnt id=hl-2-2><a class=lnlinks href=#hl-2-2>2</a>
</span><span class=lnt id=hl-2-3><a class=lnlinks href=#hl-2-3>3</a>
</span><span class=lnt id=hl-2-4><a class=lnlinks href=#hl-2-4>4</a>
</span><span class=lnt id=hl-2-5><a class=lnlinks href=#hl-2-5>5</a>
</span><span class=lnt id=hl-2-6><a class=lnlinks href=#hl-2-6>6</a>
</span><span class=lnt id=hl-2-7><a class=lnlinks href=#hl-2-7>7</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>On branch main
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>No commits yet
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Changes to be committed:
</span></span><span class=line><span class=cl>  (use &#34;git rm --cached &lt;file&gt;...&#34; to unstage)
</span></span><span class=line><span class=cl>	new file:   text.txt
</span></span></code></pre></td></tr></table></div></div><p>可以看到，文件已被添加到暂存区，等待提交。这里引出第二种状态：<strong>暂存状态（Staged）</strong>。暂存区（Stage）是 Git 用来暂存文件的地方。现在我们需要执行 <code>git commit -m "first commit"</code> 命令提交文件，<code>-m</code> 参数后面是提交信息。也可以不加参数，直接执行 <code>git commit</code> 命令，这时会打开默认编辑器，输入提交信息。这个时候再次执行 <code>git status</code> 命令，可以看到：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-3-1><a class=lnlinks href=#hl-3-1>1</a>
</span><span class=lnt id=hl-3-2><a class=lnlinks href=#hl-3-2>2</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>On branch main
</span></span><span class=line><span class=cl>nothing to commit, working tree clean
</span></span></code></pre></td></tr></table></div></div><p>可以看到，暂存区已经清空，工作区也没有未提交的修改。这个时候，所有的文件都属于第三种状态：<strong>已提交状态（Committed）</strong>。至此，第一次 <code>commit</code> 圆满完成。</p><h2 id=你可以吃后悔药>你可以吃后悔药<a hidden class=anchor aria-hidden=true href=#你可以吃后悔药>#</a></h2><p>首先，我们现在自己的仓库多提交了几次 <code>commit</code> 之后，内容如下：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-4-1><a class=lnlinks href=#hl-4-1>1</a>
</span><span class=lnt id=hl-4-2><a class=lnlinks href=#hl-4-2>2</a>
</span><span class=lnt id=hl-4-3><a class=lnlinks href=#hl-4-3>3</a>
</span><span class=lnt id=hl-4-4><a class=lnlinks href=#hl-4-4>4</a>
</span><span class=lnt id=hl-4-5><a class=lnlinks href=#hl-4-5>5</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>McDonald&#39;s
</span></span><span class=line><span class=cl>Hamburger
</span></span><span class=line><span class=cl>Coke
</span></span><span class=line><span class=cl>fries
</span></span><span class=line><span class=cl>Chicken Nuggets
</span></span></code></pre></td></tr></table></div></div><p>这个时候再次执行 <code>git status</code> 命令，可以看到：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-5-1><a class=lnlinks href=#hl-5-1> 1</a>
</span><span class=lnt id=hl-5-2><a class=lnlinks href=#hl-5-2> 2</a>
</span><span class=lnt id=hl-5-3><a class=lnlinks href=#hl-5-3> 3</a>
</span><span class=lnt id=hl-5-4><a class=lnlinks href=#hl-5-4> 4</a>
</span><span class=lnt id=hl-5-5><a class=lnlinks href=#hl-5-5> 5</a>
</span><span class=lnt id=hl-5-6><a class=lnlinks href=#hl-5-6> 6</a>
</span><span class=lnt id=hl-5-7><a class=lnlinks href=#hl-5-7> 7</a>
</span><span class=lnt id=hl-5-8><a class=lnlinks href=#hl-5-8> 8</a>
</span><span class=lnt id=hl-5-9><a class=lnlinks href=#hl-5-9> 9</a>
</span><span class=lnt id=hl-5-10><a class=lnlinks href=#hl-5-10>10</a>
</span><span class=lnt id=hl-5-11><a class=lnlinks href=#hl-5-11>11</a>
</span><span class=lnt id=hl-5-12><a class=lnlinks href=#hl-5-12>12</a>
</span><span class=lnt id=hl-5-13><a class=lnlinks href=#hl-5-13>13</a>
</span><span class=lnt id=hl-5-14><a class=lnlinks href=#hl-5-14>14</a>
</span><span class=lnt id=hl-5-15><a class=lnlinks href=#hl-5-15>15</a>
</span><span class=lnt id=hl-5-16><a class=lnlinks href=#hl-5-16>16</a>
</span><span class=lnt id=hl-5-17><a class=lnlinks href=#hl-5-17>17</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>commit b3e4e008af045743defb01ca55b2ddd47c6926e4 (HEAD -&gt; main)
</span></span><span class=line><span class=cl>Author: zzh0u &lt;weirong.zhou@outlook.com&gt;
</span></span><span class=line><span class=cl>Date:   Sun Oct 13 09:44:57 2024 +0800
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    third commit
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>commit 5c644068ce2184f5b4627aecd77462411355ec4e
</span></span><span class=line><span class=cl>Author: zzh0u &lt;weirong.zhou@outlook.com&gt;
</span></span><span class=line><span class=cl>Date:   Sun Oct 13 09:43:04 2024 +0800
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    second commit
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>commit 6ccffbb33c7574c27f9a34b1812a5fef1af08696
</span></span><span class=line><span class=cl>Author: zzh0u &lt;weirong.zhou@outlook.com&gt;
</span></span><span class=line><span class=cl>Date:   Sun Oct 13 09:32:00 2024 +0800
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    first commit
</span></span></code></pre></td></tr></table></div></div><p>可以看到，当前仓库有三个 <code>commit</code>，当然，如果你觉得输出太多，眼花缭乱，可以加上 <code>--oneline</code> 参数，输出简洁版：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-6-1><a class=lnlinks href=#hl-6-1>1</a>
</span><span class=lnt id=hl-6-2><a class=lnlinks href=#hl-6-2>2</a>
</span><span class=lnt id=hl-6-3><a class=lnlinks href=#hl-6-3>3</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>b3e4e00 (HEAD -&gt; main) third commit
</span></span><span class=line><span class=cl>5c64406 second commit
</span></span><span class=line><span class=cl>6ccffbb first commit
</span></span></code></pre></td></tr></table></div></div><p>oops! 突然我又没那么想吃鸡块了，想回到上一次提交，怎么办？要回到第二个 commit，你可以运行 git reset 命令，后面跟上 commit 的 ID，即 <code>git reset 5c64406</code>，注意这里是<strong>第二次</strong>提交的 ID。做完这一步，你可能会满心欢喜的打开文本文档，但很抱歉，这个时候文件还是原来的样子，一如刚提交完第三次 <code>commit</code> 时候的样子，你满心疑惑，这到底是怎么回事？于是你又执行 <code>git status</code>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-7-1><a class=lnlinks href=#hl-7-1>1</a>
</span><span class=lnt id=hl-7-2><a class=lnlinks href=#hl-7-2>2</a>
</span><span class=lnt id=hl-7-3><a class=lnlinks href=#hl-7-3>3</a>
</span><span class=lnt id=hl-7-4><a class=lnlinks href=#hl-7-4>4</a>
</span><span class=lnt id=hl-7-5><a class=lnlinks href=#hl-7-5>5</a>
</span><span class=lnt id=hl-7-6><a class=lnlinks href=#hl-7-6>6</a>
</span><span class=lnt id=hl-7-7><a class=lnlinks href=#hl-7-7>7</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>On branch main
</span></span><span class=line><span class=cl>Changes not staged for commit:
</span></span><span class=line><span class=cl>  (use &#34;git add &lt;file&gt;...&#34; to update what will be committed)
</span></span><span class=line><span class=cl>  (use &#34;git restore &lt;file&gt;...&#34; to discard changes in working directory)
</span></span><span class=line><span class=cl>	modified:   text.txt
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>no changes added to commit (use &#34;git add&#34; and/or &#34;git commit -a&#34;)
</span></span></code></pre></td></tr></table></div></div><p>这时候你注意到终端的 <code>Git</code> 提示你现在的状态是 <code>not staged</code>，这就引出了第四种状态：<strong>未暂存状态（Unstaged）</strong>。但是别急，不信你试试 <code>git log --oneline</code> 命令，第三次提交不会出现在提交日志中：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-8-1><a class=lnlinks href=#hl-8-1>1</a>
</span><span class=lnt id=hl-8-2><a class=lnlinks href=#hl-8-2>2</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>5c64406 (HEAD -&gt; main) second commit
</span></span><span class=line><span class=cl>6ccffbb first commit
</span></span></code></pre></td></tr></table></div></div><p>我们已经成功回到的之前的 <code>commit</code> 了。如果你想撤销一个 commit，<strong>并撤销该提交之后的所有修改</strong>，你可以在 git reset 命令中加上 &ndash;hard 标志。让我们测试一下这个方法，回到第一个 commit，执行 <code>git reset 6ccffbb --hard</code>，这就会回到第一次修改的样子：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-9-1><a class=lnlinks href=#hl-9-1>1</a>
</span><span class=lnt id=hl-9-2><a class=lnlinks href=#hl-9-2>2</a>
</span><span class=lnt id=hl-9-3><a class=lnlinks href=#hl-9-3>3</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>McDonald&#39;s
</span></span><span class=line><span class=cl>Hamburger
</span></span><span class=line><span class=cl>Coke
</span></span></code></pre></td></tr></table></div></div><p>我们又回到了指定提交时的文件初始状态。所有在那次 <code>commit</code> 之后对文件所做的修改都被删除。当我们检查提交日志时，我们将只看到第一次 <code>commit</code>。</p><h2 id=另类的后悔药>另类的后悔药<a hidden class=anchor aria-hidden=true href=#另类的后悔药>#</a></h2><p>我已经重新回到了刚提交过三次 <code>commit</code> 后的状态：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-10-1><a class=lnlinks href=#hl-10-1>1</a>
</span><span class=lnt id=hl-10-2><a class=lnlinks href=#hl-10-2>2</a>
</span><span class=lnt id=hl-10-3><a class=lnlinks href=#hl-10-3>3</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>d3b86b2 (HEAD -&gt; main) third commit
</span></span><span class=line><span class=cl>5aac07d second commit
</span></span><span class=line><span class=cl>6ccffbb first commit
</span></span></code></pre></td></tr></table></div></div><p>这次我们试试另外一个命令 <code>git revert</code>，同时输入当前提交的 ID。在我的例子中，我们使用最新的那个 <code>commit</code> 的 ID：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-11-1><a class=lnlinks href=#hl-11-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>git revert d3b86b2
</span></span></code></pre></td></tr></table></div></div><p>这个命令会撤销指定提交，同时还会创建一个新的提交，记录撤销操作。执行完这个命令后，我们再次查看提交日志：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-12-1><a class=lnlinks href=#hl-12-1>1</a>
</span><span class=lnt id=hl-12-2><a class=lnlinks href=#hl-12-2>2</a>
</span><span class=lnt id=hl-12-3><a class=lnlinks href=#hl-12-3>3</a>
</span><span class=lnt id=hl-12-4><a class=lnlinks href=#hl-12-4>4</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>ddc8aa6 (HEAD -&gt; main) Revert &#34;third commit&#34;
</span></span><span class=line><span class=cl>d3b86b2 third commit
</span></span><span class=line><span class=cl>5aac07d second commit
</span></span><span class=line><span class=cl>6ccffbb first commit
</span></span></code></pre></td></tr></table></div></div><p>可以看到，新的提交记录了<strong>撤销操作</strong>，同时<strong>保留</strong>了之前的提交记录。这就是 <code>git revert</code> 命令的作用。</p><p>想必聪明的读者看到这里已经懂了，<code>git reset</code> 会直接回到某个 <code>commit</code> 的状态，并且直接删除之后的所有提交记录；而 <code>git revert</code> 则会创建一个新的提交，保留之前的提交记录，并记录撤销操作。不过虽然 <code>git revert</code> 很方便，但是也要注意不要滥用，它会引入新的提交记录，在团队合作中可能会造成混乱。</p><h2 id=ps>Ps<a hidden class=anchor aria-hidden=true href=#ps>#</a></h2><ol><li>推荐阅读：<a href=https://www.freecodecamp.org/chinese/news/git-reverting-to-previous-commit-how-to-revert-to-last-commit/ target=_blank rel=noopener>freeCodeCamp</a></li><li>大家可以试试 <code>git reset --soft</code> 命令，看看它是怎么回事。</li><li>我刚想到一个骚操作，就是 <code>revert</code> 我上一次的 <code>revert</code>，什么俄罗斯套娃哈哈哈。</li><li>远程仓库的操作，先挖坑吧，以后有时间再写:-）</li><li>硬重置后的恢复，又挖一个坑orz</li></ol><h2 id=书影音>书影音<a hidden class=anchor aria-hidden=true href=#书影音>#</a></h2><ul><li>电影<ul><li>看完：为黛西小姐开车｜★★★★☆</li><li>看完：神偷奶爸4｜★★★★☆</li><li>看完：泳者之心｜★★★★☆</li><li>看完：头脑特工队2｜★★★★★</li><li>看完：四月物语｜★★★★☆</li><li>看完：走走停停｜★★★★☆</li></ul></li><li>音乐<ul><li>在听：勿听@张紫宁&赵紫骅｜★★★★★</li><li>在听：未竟@秦勇｜★★★★★</li></ul></li></ul></div><footer class=post-footer><ul class=post-tags><li><a href=http://localhost:1313/tags/git/>Git</a></li><li><a href=http://localhost:1313/tags/%E6%8A%80%E6%9C%AF/>技术</a></li></ul><nav class=paginav><a class=prev href=http://localhost:1313/posts/%E8%A5%BF%E5%AD%A6%E4%B8%9C%E6%B8%90/%E8%AF%91%E4%B8%BA%E4%BB%80%E4%B9%88%E6%B2%A1%E6%9C%89%E6%9B%B4%E5%A4%9A%E4%BA%BA%E4%BD%BF%E7%94%A8-linux/><span class=title>« Prev</span><br><span>[译]为什么没有更多人使用 Linux</span>
</a><a class=next href=http://localhost:1313/posts/%E6%B2%B3%E4%B8%AD%E7%9F%B3%E5%85%BD/golang-%E5%88%87%E7%89%87%E9%95%BF%E5%BA%A6/><span class=title>Next »</span><br><span>Golang 切片长度</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2024 <a href=http://localhost:1313/>zzh0u's blog</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a><p><span xmlns:cc=http://creativecommons.org/ns# xmlns:dct=http://purl.org/dc/terms/>Licensed under
<a href="http://creativecommons.org/licenses/by-nc-sa/4.0/?ref=chooser-v1" target=_blank rel="license noopener noreferrer">CC BY-NC-SA 4.0</a></span></p><script defer src=https://cloud.umami.is/script.js data-website-id=725b4f55-532a-435a-b614-7b6a3c3606cd></script></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>